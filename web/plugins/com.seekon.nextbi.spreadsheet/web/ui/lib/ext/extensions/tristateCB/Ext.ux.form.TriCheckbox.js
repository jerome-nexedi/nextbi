Ext.namespace("Ext.ux","Ext.ux.form");Ext.ux.form.TriCheckbox=Ext.extend(Ext.form.Checkbox,{values:[null,false,true],checkedCls:["x-checkbox-grayed",null,"x-checkbox-checked"],defaultAutoCreate:{tag:"input",type:"hidden",autocomplete:"off"},cbFocusCls:"x-checkbox-focus",cbOverCls:"x-checkbox-over",cbDownCls:"x-checkbox-down",onRender:function(ct,position){Ext.form.Checkbox.superclass.onRender.call(this,ct,position);this.innerWrap=this.el.wrap({tabIndex:this.tabIndex,cls:this.baseCls+"-wrap-inner"});this.wrap=this.innerWrap.wrap({cls:this.baseCls+"-wrap"});if(this.boxLabel){this.labelEl=this.innerWrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel})}this.imageEl=this.innerWrap.createChild({tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-checkbox"},this.el);if((typeof this.value=="object"&&this.value===null)||this.value===true){this.setValue(this.value)}else{this.setValue(false)}this.originalValue=this.value},getValue:function(){return Ext.form.Checkbox.superclass.getValue.call(this)},getRawValue:function(){return Ext.form.Checkbox.superclass.getRawValue.call(this)},setValue:function(v){if(!(typeof v=="object"&&v===null)&&v!==true){v=false}Ext.form.Checkbox.superclass.setValue.call(this,v);this.updateCheckCls();this.fireEvent("check",this,v)},getCheckIndex:function(){for(var i=0;i<this.values.length;i++){if(this.value===this.values[i]){return i}}return 0},updateCheckCls:function(){if(!this.wrap){return}var cls=this.checkedCls[this.getCheckIndex()];this.wrap.replaceClass(this._checkCls,cls);this._checkCls=cls},check:function(){if(!this.disabled&&!this.readOnly){this.setValue(this.values[(this.getCheckIndex()+1)%this.values.length])}},afterRender:function(){Ext.form.Checkbox.superclass.afterRender.call(this)},initEvents:function(){Ext.ux.form.TriCheckbox.superclass.initEvents.call(this);this.imageEl.on("click",this.check,this);this.mon(this.el,{scope:this,click:this.check,change:this.check})},initComponent:function(){Ext.form.Checkbox.superclass.initComponent.call(this);this.addEvents("check")}});Ext.reg("tri-checkbox",Ext.ux.form.TriCheckbox);